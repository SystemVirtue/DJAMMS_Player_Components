<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obie Video Player</title>
    <script>console.log('[renderer] HTML head script executing');</script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> -->
    <!-- <link rel="stylesheet" href="player.css" /> -->
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Basic styles inline */
        body {
            margin: 0;
            padding: 0;
            background: black;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        .video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
        }
    </style>
</head>
<body class="kiosk-mode">
    <script>console.log('[renderer] Body script executing');</script>
    <!-- Debug overlay to show renderer/init status -->
    <div id="debug-status" style="
        position: fixed;
        top: 8px;
        left: 8px;
        padding: 6px 10px;
        background: rgba(0, 0, 0, 0.7);
        color: #0f0;
        font-family: monospace;
        font-size: 11px;
        z-index: 2000;
        border-radius: 4px;
        max-width: 40vw;
        pointer-events: none;
        white-space: pre-line;
    ">Renderer: booting...</div>
    <!-- Main video container -->
    <div id="video-container" class="video-container">
        <!-- Dual video elements for crossfade transitions -->
        <video id="video-a" class="video-player" preload="metadata" muted></video>
        <video id="video-b" class="video-player" preload="metadata" muted></video>
        
        <!-- Video will be loaded here by the queue system -->
        <div id="loading-screen" class="loading-screen" style="
    display: flex !important; 
    opacity: 1 !important;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.9);
    padding: 40px;
    border-radius: 12px;
    min-width: 200px;
    z-index: 1000;
    flex-direction: column;
    align-items: center;
    justify-content: center;
">
            <div class="loading-spinner" style="
                width: 60px;
                height: 60px;
                border: 4px solid rgba(255, 255, 255, 0.1);
                border-top: 4px solid #fff;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin: 0 auto 20px;
            "></div>
            <div class="loading-text" style="color: white; font-size: 18px; font-family: Arial, sans-serif;">Initializing...</div>
        </div>
    </div>

    <!-- Logo Overlay -->
    <div id="logo-overlay" class="logo-overlay top-right" style="display: none;">
        <!-- Temporarily disabled logo -->
    </div>

    <!-- Now Playing Overlay -->
    <div id="now-playing-overlay" class="now-playing-overlay bottom">
        <div class="now-playing-content">
            <div class="now-playing-title">Now Playing</div>
            <div class="now-playing-info">
                <div id="now-playing-artist" class="artist">Artist</div>
                <div id="now-playing-title" class="title">Title</div>
            </div>
            <div class="now-playing-progress">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <div class="time-info">
                    <span id="current-time">0:00</span> / <span id="total-time">0:00</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Admin Panel -->
    <div id="admin-panel" class="admin-panel hidden">
        <div style="padding: 20px; color: white;">Admin Panel - Coming Soon</div>
    </div>

    <!-- Error Overlay (shown when errors occur) -->
    <div id="error-overlay" class="error-overlay hidden">
        <div class="error-content">
            <div class="error-icon">‚ö†Ô∏è</div>
            <div class="error-message" id="error-message">An error occurred</div>
            <button id="dismiss-error" class="dismiss-btn">Dismiss</button>
        </div>
    </div>

    <!-- Setup Required Overlay -->
    <div id="setup-overlay" class="setup-overlay hidden">
        <div class="setup-content">
            <div class="setup-icon">‚öôÔ∏è</div>
            <h2>Setup Required</h2>
            <p>Please complete the initial setup to continue.</p>
            <button id="start-setup" class="setup-btn">Start Setup</button>
        </div>
    </div>

    <!-- Update Available Overlay -->
    <div id="update-overlay" class="update-overlay hidden">
        <div class="update-content">
            <div class="update-icon">üîÑ</div>
            <h3>Update Available</h3>
            <p>A new version is available for download.</p>
            <div class="update-buttons">
                <button id="install-update" class="update-btn primary">Install Now</button>
                <button id="dismiss-update" class="update-btn secondary">Later</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        console.log('HTML inline script executing');
        // Debug: Check if elements exist
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM Content Loaded');
            const loadingScreen = document.getElementById('loading-screen');
            const videoContainer = document.getElementById('video-container');
            console.log('Loading screen element:', loadingScreen);
            console.log('Video container element:', videoContainer);
            if (loadingScreen) {
                loadingScreen.style.display = 'flex';
                loadingScreen.style.opacity = '1';
                console.log('Loading screen forced visible');
            }
        });
    </script>
    <script>
        console.log('[renderer] About to load player.js');
    </script>
    <script src="player.js"></script>
</body>
</html>
